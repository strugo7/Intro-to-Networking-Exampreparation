<!DOCTYPE html>
<html lang="he" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Layer 2 Masterclass: Switching & VLANs</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;700;900&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;700&display=swap');

        body {
            font-family: 'Heebo', sans-serif;
            background-color: #0f172a;
            color: #e2e8f0;
        }

        .font-mono {
            font-family: 'Fira Code', monospace;
        }

        .glass-panel {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .neon-text {
            text-shadow: 0 0 10px rgba(56, 189, 248, 0.5);
        }

        .force-ltr {
            direction: ltr;
        }

        @keyframes pulse-frame {
            0% {
                box-shadow: 0 0 0 0 rgba(56, 189, 248, 0.7);
            }

            70% {
                box-shadow: 0 0 0 10px rgba(56, 189, 248, 0);
            }

            100% {
                box-shadow: 0 0 0 0 rgba(56, 189, 248, 0);
            }
        }

        .frame-pulse {
            animation: pulse-frame 1.5s infinite;
        }
    </style>
</head>

<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- ICONS ---
        const IconBase = ({ children, size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>{children}</svg>
        );
        const SwitchIcon = (props) => <IconBase {...props}><rect x="2" y="6" width="20" height="12" rx="2" /><path d="M6 12h.01" /><path d="M10 12h.01" /><path d="M14 12h.01" /><path d="M18 12h.01" /></IconBase>;
        const PCIcon = (props) => <IconBase {...props}><rect x="2" y="3" width="20" height="14" rx="2" ry="2" /><line x1="2" y1="20" x2="22" y2="20" /></IconBase>;
        const SearchIcon = (props) => <IconBase {...props}><circle cx="11" cy="11" r="8" /><line x1="21" x2="16.65" y1="21" y2="16.65" /></IconBase>;
        const LayersIcon = (props) => <IconBase {...props}><polygon points="12 2 2 7 12 12 22 7 12 2" /><polyline points="2 17 12 22 22 17" /><polyline points="2 12 12 17 22 12" /></IconBase>;
        const TagIcon = (props) => <IconBase {...props}><path d="M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z" /><path d="M7 7h.01" /></IconBase>;
        const BroadcastIcon = (props) => <IconBase {...props}><path d="M4.93 19.07a10 10 0 0 1 0-14.14" /><path d="M7.76 16.24a6 6 0 0 1 0-8.48" /><path d="M12 12h.01" /></IconBase>;

        // --- COMPONENTS ---

        // 1. Frame Structure Visualizer
        const FrameVisualizer = () => {
            const [hoverField, setHoverField] = useState(null);

            const fields = [
                { id: 'pre', label: 'Preamble', size: '8 Bytes', desc: 'רצף ביטים (101010...) לסנכרון השעון בין הכרטיסים. ה-SFD בסוף מסמן את תחילת המסגרת.' },
                { id: 'dst', label: 'Destination MAC', size: '6 Bytes', desc: 'כתובת היעד הפיזית. המתג מסתכל *רק* על השדה הזה כדי להחליט לאן להעביר.' },
                { id: 'src', label: 'Source MAC', size: '6 Bytes', desc: 'כתובת המקור. המתג משתמש בשדה הזה כדי *ללמוד* איפה נמצא השולח.' },
                { id: 'type', label: 'Type / Length', size: '2 Bytes', desc: 'מגדיר איזה פרוטוקול נמצא בפנים (למשל IPv4 = 0x0800) או את אורך המידע.' },
                { id: 'data', label: 'Payload (Data)', size: '46-1500 Bytes', desc: 'החבילה עצמה (IP Packet) משכבה 3. אם היא קטנה מדי, מוסיפים ריפוד (Padding).' },
                { id: 'fcs', label: 'FCS', size: '4 Bytes', desc: 'Frame Check Sequence. בדיקת שגיאות (CRC). אם המסגרת נפגעה בדרך, היא נזרקת.' }
            ];

            return (
                <div className="glass-panel p-8 rounded-2xl mb-12 border-t-4 border-sky-500">
                    <div className="flex items-center gap-3 mb-6">
                        <div className="bg-sky-500/20 p-3 rounded-xl text-sky-400">
                            <LayersIcon size={32} />
                        </div>
                        <div>
                            <h2 className="text-2xl font-bold text-white">אנטומיה של מסגרת (Ethernet Frame)</h2>
                            <p className="text-slate-400">ככה נראית ה"מעטפה" של שכבה 2.</p>
                        </div>
                    </div>

                    <div className="flex flex-col gap-4">
                        <div className="flex w-full h-20 rounded-lg overflow-hidden border border-slate-600 font-mono text-xs md:text-sm cursor-help shadow-lg select-none">
                            <div onMouseEnter={() => setHoverField('pre')} className="flex-none w-20 bg-slate-800 flex items-center justify-center text-slate-500 border-r border-slate-700 hover:bg-slate-700 transition-colors">Preamble</div>
                            <div onMouseEnter={() => setHoverField('dst')} className="flex-1 bg-red-900/40 flex items-center justify-center text-red-200 border-r border-slate-700 hover:bg-red-800/50 transition-colors">Dest MAC</div>
                            <div onMouseEnter={() => setHoverField('src')} className="flex-1 bg-green-900/40 flex items-center justify-center text-green-200 border-r border-slate-700 hover:bg-green-800/50 transition-colors">Src MAC</div>
                            <div onMouseEnter={() => setHoverField('type')} className="flex-none w-16 bg-yellow-900/30 flex items-center justify-center text-yellow-200 border-r border-slate-700 hover:bg-yellow-800/50 transition-colors">Type</div>
                            <div onMouseEnter={() => setHoverField('data')} className="flex-[3] bg-blue-900/40 flex items-center justify-center text-blue-200 border-r border-slate-700 hover:bg-blue-800/50 transition-colors">Data (Payload)</div>
                            <div onMouseEnter={() => setHoverField('fcs')} className="flex-none w-16 bg-purple-900/40 flex items-center justify-center text-purple-200 hover:bg-purple-800/50 transition-colors">FCS</div>
                        </div>

                        <div className="min-h-[100px] bg-slate-900/50 p-4 rounded-lg border border-slate-700 transition-all duration-300">
                            {hoverField ? (
                                <div>
                                    <div className="flex justify-between items-center mb-2">
                                        <h4 className="text-xl font-bold text-white">{fields.find(f => f.id === hoverField).label}</h4>
                                        <span className="text-xs font-mono bg-slate-800 px-2 py-1 rounded text-sky-400">{fields.find(f => f.id === hoverField).size}</span>
                                    </div>
                                    <p className="text-slate-300">{fields.find(f => f.id === hoverField).desc}</p>
                                </div>
                            ) : (
                                <div className="h-full flex items-center justify-center text-slate-500">
                                    העבר את העכבר על חלקי המסגרת לקבלת הסבר
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        // 2. Switching Logic Simulator
        const SwitchSimulator = () => {
            const [macTable, setMacTable] = useState({}); // { MAC: Port }
            const [logs, setLogs] = useState([]);
            const [animState, setAnimState] = useState(null); // { src, dst, type: 'flood'|'direct' }

            const hosts = [
                { id: 'A', mac: 'AA:AA', port: 1 },
                { id: 'B', mac: 'BB:BB', port: 2 },
                { id: 'C', mac: 'CC:CC', port: 3 },
                { id: 'D', mac: 'DD:DD', port: 4 }
            ];

            const sendFrame = (srcHost, dstHost) => {
                if (animState) return; // Busy

                const newLogs = [];
                let type = 'direct';

                // 1. Learning Process
                newLogs.push(`1. המתג קיבל מסגרת מ-${srcHost.id} בפורט ${srcHost.port}.`);
                if (!macTable[srcHost.mac]) {
                    setMacTable(prev => ({ ...prev, [srcHost.mac]: srcHost.port }));
                    newLogs.push(`2. לימוד: הוספת כתובת ${srcHost.mac} בפורט ${srcHost.port} לטבלה.`);
                } else {
                    newLogs.push(`2. רענון: כתובת ${srcHost.mac} כבר בטבלה בפורט הנכון.`);
                }

                // 2. Forwarding Decision
                if (macTable[dstHost.mac]) {
                    newLogs.push(`3. ידוע: היעד ${dstHost.mac} נמצא בפורט ${macTable[dstHost.mac]}.`);
                    newLogs.push(`4. Forwarding: שליחה ישירה לפורט ${macTable[dstHost.mac]} בלבד.`);
                    type = 'direct';
                } else {
                    newLogs.push(`3. לא ידוע: היעד ${dstHost.mac} לא בטבלה.`);
                    newLogs.push(`4. Flooding: הצפת המסגרת לכל הפורטים (חוץ מפורט ${srcHost.port}).`);
                    type = 'flood';
                }

                setLogs(newLogs);
                setAnimState({ src: srcHost, dst: dstHost, type });

                // Reset Animation
                setTimeout(() => setAnimState(null), 3000);
            };

            const clearTable = () => {
                setMacTable({});
                setLogs(['הטבלה נוקתה. המתג שכח את כולם.']);
            };

            return (
                <div className="glass-panel p-8 rounded-2xl mb-12 relative overflow-hidden">
                    <h2 className="text-2xl font-bold text-white mb-6 flex items-center gap-2">
                        <SwitchIcon className="text-sky-400" />
                        סימולטור מתגים (Switching Logic)
                    </h2>

                    <div className="flex flex-col lg:flex-row gap-8">
                        {/* Simulation Area */}
                        <div className="flex-1 relative min-h-[400px] bg-slate-900/50 rounded-xl border border-slate-700">

                            {/* Static Wires Background */}
                            <svg className="absolute inset-0 w-full h-full pointer-events-none" style={{ zIndex: 0 }}>
                                <line x1="15%" y1="20%" x2="50%" y2="50%" stroke="#334155" strokeWidth="2" />
                                <line x1="85%" y1="20%" x2="50%" y2="50%" stroke="#334155" strokeWidth="2" />
                                <line x1="15%" y1="80%" x2="50%" y2="50%" stroke="#334155" strokeWidth="2" />
                                <line x1="85%" y1="80%" x2="50%" y2="50%" stroke="#334155" strokeWidth="2" />
                            </svg>

                            {/* Switch Center */}
                            <div
                                className="absolute bg-slate-800 rounded-lg border-2 border-sky-600 flex flex-col items-center justify-center z-10 shadow-2xl w-32 h-20"
                                style={{ top: '50%', left: '50%', transform: 'translate(-50%, -50%)' }}
                            >
                                <SwitchIcon className={`text-white ${animState ? 'animate-pulse' : ''}`} size={32} />
                                <span className="text-xs text-sky-200 mt-1 font-bold">SWITCH</span>
                            </div>

                            {/* Hosts */}
                            {hosts.map((host, i) => {
                                // Explicit absolute positions matching wire endpoints
                                const positions = [
                                    { top: '20%', left: '15%' }, // A
                                    { top: '20%', left: '85%' }, // B
                                    { top: '80%', left: '15%' }, // C
                                    { top: '80%', left: '85%' }  // D
                                ];

                                return (
                                    <div
                                        key={host.id}
                                        className="absolute flex flex-col items-center gap-2 z-10"
                                        style={{
                                            top: positions[i].top,
                                            left: positions[i].left,
                                            transform: 'translate(-50%, -50%)'
                                        }}
                                    >
                                        <div className="relative">
                                            <div
                                                className={`bg-slate-800 p-3 rounded-full border-2 ${animState?.dst.id === host.id && animState?.type === 'direct' ? 'border-green-500 shadow-[0_0_20px_lime]' : 'border-slate-600'}`}
                                            >
                                                <PCIcon className="text-slate-300" />
                                            </div>
                                            {/* Port Label */}
                                            <div className="absolute -bottom-6 left-1/2 -translate-x-1/2 text-xs text-slate-500 font-mono whitespace-nowrap">Port {host.port}</div>
                                        </div>
                                        <div className="text-center mt-4">
                                            <div className="text-white font-bold">{host.id}</div>
                                            <div className="text-[10px] text-slate-500 font-mono">{host.mac}</div>
                                        </div>
                                    </div>
                                );
                            })}

                            {/* Animation Particles */}
                            {animState && (
                                <>
                                    {/* Sender to Switch */}
                                    <div className="absolute w-4 h-4 bg-yellow-400 rounded-full shadow-[0_0_10px_yellow] transition-all z-20"
                                        style={{
                                            top: '50%', left: '50%', transform: 'translate(-50%, -50%)',
                                            animation: `moveFrom${animState.src.id} 1s forwards`
                                        }}
                                    ></div>

                                    {/* Switch to Dest (Direct) */}
                                    {animState.type === 'direct' && (
                                        <div className="absolute w-4 h-4 bg-green-500 rounded-full shadow-[0_0_10px_lime] transition-all z-20"
                                            style={{
                                                top: '50%', left: '50%', transform: 'translate(-50%, -50%)',
                                                animation: `moveTo${animState.dst.id} 1s 1s forwards`,
                                                opacity: 0
                                            }}
                                        ></div>
                                    )}

                                    {/* Flood */}
                                    {animState.type === 'flood' && hosts.filter(h => h.id !== animState.src.id).map(h => (
                                        <div key={h.id} className="absolute w-4 h-4 bg-red-500 rounded-full shadow-[0_0_10px_red] transition-all z-20"
                                            style={{
                                                top: '50%', left: '50%', transform: 'translate(-50%, -50%)',
                                                animation: `moveTo${h.id} 1s 1s forwards`,
                                                opacity: 0
                                            }}
                                        ></div>
                                    ))}

                                    {/* CSS for specific moves matching exact coordinates */}
                                    <style>{`
                                        @keyframes moveFromA { 0% { top: 20%; left: 15%; opacity:1; } 100% { top: 50%; left: 50%; opacity:0; } }
                                        @keyframes moveToA { 0% { top: 50%; left: 50%; opacity:1; } 100% { top: 20%; left: 15%; opacity:0; } }
                                        @keyframes moveFromB { 0% { top: 20%; left: 85%; opacity:1; } 100% { top: 50%; left: 50%; opacity:0; } }
                                        @keyframes moveToB { 0% { top: 50%; left: 50%; opacity:1; } 100% { top: 20%; left: 85%; opacity:0; } }
                                        @keyframes moveFromC { 0% { top: 80%; left: 15%; opacity:1; } 100% { top: 50%; left: 50%; opacity:0; } }
                                        @keyframes moveToC { 0% { top: 50%; left: 50%; opacity:1; } 100% { top: 80%; left: 15%; opacity:0; } }
                                        @keyframes moveFromD { 0% { top: 80%; left: 85%; opacity:1; } 100% { top: 50%; left: 50%; opacity:0; } }
                                        @keyframes moveToD { 0% { top: 50%; left: 50%; opacity:1; } 100% { top: 80%; left: 85%; opacity:0; } }
                                    `}</style>
                                </>
                            )}
                        </div>

                        {/* Controls & Table */}
                        <div className="w-full lg:w-1/3 flex flex-col gap-6">
                            <div className="bg-slate-900 p-4 rounded-xl border border-slate-700">
                                <h3 className="text-white font-bold mb-4 border-b border-slate-700 pb-2">פעולות</h3>
                                <div className="grid grid-cols-2 gap-2 mb-4">
                                    <button onClick={() => sendFrame(hosts[0], hosts[1])} disabled={!!animState} className="bg-slate-800 hover:bg-slate-700 text-xs p-2 rounded text-slate-300">A &rarr; B</button>
                                    <button onClick={() => sendFrame(hosts[0], hosts[2])} disabled={!!animState} className="bg-slate-800 hover:bg-slate-700 text-xs p-2 rounded text-slate-300">A &rarr; C</button>
                                    <button onClick={() => sendFrame(hosts[1], hosts[0])} disabled={!!animState} className="bg-slate-800 hover:bg-slate-700 text-xs p-2 rounded text-slate-300">B &rarr; A</button>
                                    <button onClick={() => sendFrame(hosts[3], hosts[2])} disabled={!!animState} className="bg-slate-800 hover:bg-slate-700 text-xs p-2 rounded text-slate-300">D &rarr; C</button>
                                </div>
                                <button onClick={clearTable} className="w-full bg-red-900/50 hover:bg-red-900 text-red-200 text-xs py-2 rounded border border-red-800">ניקוי טבלה (Restart)</button>
                            </div>

                            <div className="bg-slate-900 p-4 rounded-xl border border-slate-700 flex-1">
                                <h3 className="text-white font-bold mb-2 flex justify-between items-center">
                                    <span>MAC Address Table</span>
                                    <span className="text-[10px] bg-sky-900 text-sky-200 px-2 rounded">CAM</span>
                                </h3>
                                <div className="w-full text-xs text-slate-400 mb-2 grid grid-cols-2 font-mono border-b border-slate-700 pb-1">
                                    <span>MAC Address</span>
                                    <span className="text-right">Port</span>
                                </div>
                                <div className="space-y-1">
                                    {Object.keys(macTable).length === 0 ? (
                                        <div className="text-center text-slate-600 py-4 italic">הטבלה ריקה (Empty)</div>
                                    ) : (
                                        Object.entries(macTable).map(([mac, port]) => (
                                            <div key={mac} className="grid grid-cols-2 text-sm font-mono text-green-400 animate-slide-up">
                                                <span>{mac}</span>
                                                <span className="text-right text-white">{port}</span>
                                            </div>
                                        ))
                                    )}
                                </div>
                            </div>

                            <div className="bg-black/30 p-2 rounded h-32 overflow-y-auto text-[10px] font-mono text-slate-400">
                                {logs.map((log, i) => <div key={i} className="mb-1">{log}</div>)}
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // 3. ARP Explanation
        const ARPExplainer = () => {
            const [step, setStep] = useState(0);

            return (
                <div className="glass-panel p-8 rounded-2xl mb-12 border-t-4 border-yellow-500">
                    <div className="flex items-center gap-3 mb-6">
                        <div className="bg-yellow-500/20 p-3 rounded-xl text-yellow-400">
                            <BroadcastIcon size={32} />
                        </div>
                        <div>
                            <h2 className="text-2xl font-bold text-white">פרוטוקול ARP</h2>
                            <p className="text-slate-400">Address Resolution Protocol: הגישור בין IP ל-MAC.</p>
                        </div>
                    </div>

                    <div className="bg-slate-900 p-6 rounded-xl relative min-h-[200px] flex items-center justify-between px-12">
                        {/* Host A */}
                        <div className="text-center relative z-10">
                            <PCIcon size={48} className="text-blue-400 mx-auto" />
                            <div className="text-white font-bold mt-2">192.168.1.10</div>
                            <div className="text-xs text-slate-500">MAC: AA:AA</div>
                            {step === 1 && (
                                <div className="absolute -top-16 left-0 bg-yellow-100 text-black p-2 rounded text-xs w-48 shadow-lg bubble-right">
                                    "מי זה 192.168.1.20? אני צריך את ה-MAC שלו!"
                                </div>
                            )}
                        </div>

                        {/* Host B */}
                        <div className="text-center relative z-10">
                            <PCIcon size={48} className="text-green-400 mx-auto" />
                            <div className="text-white font-bold mt-2">192.168.1.20</div>
                            <div className="text-xs text-slate-500">MAC: BB:BB</div>
                            {step === 2 && (
                                <div className="absolute -top-16 right-0 bg-green-100 text-black p-2 rounded text-xs w-48 shadow-lg bubble-left">
                                    "זה אני! ה-MAC שלי הוא BB:BB. קח אותו."
                                </div>
                            )}
                        </div>

                        {/* Broadcast Animation */}
                        {step === 1 && (
                            <div className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-full text-center">
                                <div className="text-yellow-500 font-bold text-sm mb-2">BROADCAST (FF:FF:FF:FF:FF:FF)</div>
                                <div className="h-1 bg-yellow-500/50 w-3/4 mx-auto rounded animate-pulse"></div>
                            </div>
                        )}
                        {/* Unicast Reply */}
                        {step === 2 && (
                            <div className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-full text-center">
                                <div className="text-green-500 font-bold text-sm mb-2">UNICAST REPLY</div>
                                <div className="h-1 bg-green-500/50 w-3/4 mx-auto rounded"></div>
                            </div>
                        )}
                    </div>

                    <div className="flex justify-center mt-6 gap-4">
                        <button onClick={() => setStep(1)} className="bg-slate-800 hover:bg-slate-700 text-white px-6 py-2 rounded-full border border-slate-600">1. שלח ARP Request</button>
                        <button onClick={() => setStep(2)} className="bg-slate-800 hover:bg-slate-700 text-white px-6 py-2 rounded-full border border-slate-600">2. קבל ARP Reply</button>
                    </div>
                </div>
            );
        };

        // 4. VLAN Visualizer
        const VLANVisualizer = () => {
            const [mode, setMode] = useState('flat'); // 'flat' or 'vlan'

            return (
                <div className="glass-panel p-8 rounded-2xl border-t-4 border-purple-500">
                    <div className="flex justify-between items-center mb-6">
                        <div className="flex items-center gap-3">
                            <div className="bg-purple-500/20 p-3 rounded-xl text-purple-400">
                                <TagIcon size={32} />
                            </div>
                            <div>
                                <h2 className="text-2xl font-bold text-white">VLANs (Virtual LANs)</h2>
                                <p className="text-slate-400">פיצול לוגי של מתג פיזי אחד.</p>
                            </div>
                        </div>
                        <button
                            onClick={() => setMode(mode === 'flat' ? 'vlan' : 'flat')}
                            className="bg-purple-600 hover:bg-purple-500 text-white px-6 py-2 rounded-lg font-bold transition-all"
                        >
                            {mode === 'flat' ? 'הפעל VLANs' : 'בטל VLANs'}
                        </button>
                    </div>

                    <div className="grid md:grid-cols-2 gap-12">
                        <div className="space-y-4">
                            <div className={`p-4 rounded-xl border transition-all ${mode === 'flat' ? 'bg-slate-800 border-slate-600' : 'bg-slate-900 border-purple-500'}`}>
                                <h3 className="font-bold text-white mb-2">{mode === 'flat' ? 'רשת שטוחה (Flat Network)' : 'רשת מחולקת (Segmented)'}</h3>
                                <p className="text-sm text-slate-300">
                                    {mode === 'flat'
                                        ? 'כל המחשבים שומעים את ה-Broadcast של כולם. אין אבטחה, אין הפרדה.'
                                        : 'VLAN 10 (מכירות) מופרד לחלוטין מ-VLAN 20 (הנהלה). הם לא רואים זה את זה ללא ראוטר.'}
                                </p>
                            </div>

                            {mode === 'vlan' && (
                                <div className="bg-yellow-900/20 border border-yellow-600/50 p-4 rounded-lg text-sm text-yellow-200">
                                    <strong>802.1Q Tagging:</strong> כאשר הודעה עוברת בין מתגים (Trunk), מוסיפים לה "תגית" (Tag) של 4 בייטים כדי לדעת לאיזה צבע היא שייכת.
                                </div>
                            )}
                        </div>

                        <div className="bg-slate-900 p-6 rounded-xl border border-slate-700 flex flex-col items-center">
                            {/* The Switch */}
                            <div className="w-full h-16 bg-slate-800 rounded border-2 border-slate-600 flex justify-around items-center mb-8 relative">
                                <div className="text-xs text-slate-500 absolute -top-5 left-2">Switch Ports</div>
                                {/* Ports */}
                                {[1, 2, 3, 4].map(p => (
                                    <div key={p} className={`w-8 h-6 border bg-black ${mode === 'vlan' ? (p <= 2 ? 'border-red-500 bg-red-900/20' : 'border-blue-500 bg-blue-900/20') : 'border-slate-500'}`}></div>
                                ))}
                            </div>

                            {/* PCs */}
                            <div className="flex gap-8">
                                <div className={`flex flex-col items-center p-2 rounded ${mode === 'vlan' ? 'bg-red-900/10 border border-red-500/30' : ''}`}>
                                    <PCIcon className="text-slate-300" />
                                    <span className="text-xs mt-1 text-slate-400">PC 1</span>
                                    {mode === 'vlan' && <span className="text-[10px] text-red-400 font-bold">VLAN 10</span>}
                                </div>
                                <div className={`flex flex-col items-center p-2 rounded ${mode === 'vlan' ? 'bg-red-900/10 border border-red-500/30' : ''}`}>
                                    <PCIcon className="text-slate-300" />
                                    <span className="text-xs mt-1 text-slate-400">PC 2</span>
                                    {mode === 'vlan' && <span className="text-[10px] text-red-400 font-bold">VLAN 10</span>}
                                </div>
                                <div className="w-px bg-slate-700 h-20 mx-2"></div>
                                <div className={`flex flex-col items-center p-2 rounded ${mode === 'vlan' ? 'bg-blue-900/10 border border-blue-500/30' : ''}`}>
                                    <PCIcon className="text-slate-300" />
                                    <span className="text-xs mt-1 text-slate-400">PC 3</span>
                                    {mode === 'vlan' && <span className="text-[10px] text-blue-400 font-bold">VLAN 20</span>}
                                </div>
                                <div className={`flex flex-col items-center p-2 rounded ${mode === 'vlan' ? 'bg-blue-900/10 border border-blue-500/30' : ''}`}>
                                    <PCIcon className="text-slate-300" />
                                    <span className="text-xs mt-1 text-slate-400">PC 4</span>
                                    {mode === 'vlan' && <span className="text-[10px] text-blue-400 font-bold">VLAN 20</span>}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // --- MAIN APP ---

        const App = () => {
            return (
                <div className="min-h-screen bg-slate-950 pb-20 overflow-x-hidden">

                    {/* Hero Section */}
                    <div className="relative bg-gradient-to-br from-sky-900/20 via-slate-950 to-slate-950 pt-20 pb-12 px-6 border-b border-white/5 mb-12">
                        <div className="max-w-4xl mx-auto text-center">
                            <div className="inline-block p-2 px-4 rounded-full bg-sky-500/10 border border-sky-500/30 text-sky-400 text-xs font-bold mb-4">
                                שיעור 7
                            </div>
                            <h1 className="text-4xl md:text-6xl font-black text-white mb-4 neon-text">
                                שכבת הערוץ (Layer 2)
                            </h1>
                            <p className="text-xl text-slate-400 max-w-2xl mx-auto">
                                איך נתונים זזים בתוך הרשת המקומית, מהם מתגים, ואיך VLANs עושים סדר בבלאגן.
                            </p>
                        </div>
                    </div>

                    <div className="max-w-6xl mx-auto px-6 space-y-16">

                        <FrameVisualizer />

                        <SwitchSimulator />

                        <div className="grid md:grid-cols-2 gap-8">
                            <ARPExplainer />
                            <div className="glass-panel p-8 rounded-2xl mb-12 border-t-4 border-slate-500 flex flex-col justify-center text-center">
                                <h3 className="text-xl font-bold text-white mb-2">Collision vs Broadcast Domains</h3>
                                <p className="text-slate-400 mb-4 text-sm">מושג קריטי למבחן!</p>
                                <div className="space-y-4 text-right">
                                    <div className="bg-slate-800 p-3 rounded border-r-4 border-red-500">
                                        <strong className="text-white block">Collision Domain (התנגשות)</strong>
                                        <span className="text-xs text-slate-400">ב-Hub, כולם באותו דומיין (בלאגן). ב-Switch, כל פורט הוא דומיין נפרד (שקט).</span>
                                    </div>
                                    <div className="bg-slate-800 p-3 rounded border-r-4 border-yellow-500">
                                        <strong className="text-white block">Broadcast Domain (שידור לכולם)</strong>
                                        <span className="text-xs text-slate-400">מתג מעביר Broadcast לכולם. רק ראוטר (או VLAN) חוסם Broadcast.</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <VLANVisualizer />

                    </div>

                    <footer className="text-center text-slate-600 py-12 mt-12 text-sm border-t border-slate-900/50 bg-slate-950">
                        <p>© 2026 Intro to Networking | Layer 2 Deep Dive</p>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>

</html>